<!DOCTYPE html>
<html>
<head lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="Description" content="Angular JS 1.x Learning - ">
    <title>Angular JS 1.x</title>

    <link rel="stylesheet" type="text/css" href="../../assets/bootstrap/bootstrap.css"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="../../assets/angular/angular.js"></script>
    <script type="text/javascript" src="app.js"></script>

    <script src="../../assets/prism/prism.js"></script>
    <script src="../../assets/prism/prism.css"></script>

</head>
<body class="container" ng-app="myApp">

<h3>
    <a href='../../index.html'> <img src="../../assets/images/back-arrow.png" alt="Back To Home"/> </a>
    Compile & Link Function in Angular JS 1.x Directives
</h3>
<h5>In this example we are creating a simple directive using Compile & Link Function</h5>
<hr/>

<div class="container" ng-controller="Controller1 as Ctrl">
    <div class="row">
        <div class="col-md-8">
            <h4>HTML:</h4>
            <pre data-line>
                <code class="language-markup">
                    &lt;h4&gt;Result:&lt;/h4&gt;
                    &lt;my-compile-link-directive&gt;&lt;/my-compile-link-directive&gt;
                </code>
            </pre>

            <h4>JavaScript:</h4>

            <pre data-line>
                <code class="language-javascript">

            /////////////
            //Angular App
            ////////////
            var myApp = angular.module("myApp", []);


            /////////////
            //Angular Controller
            ////////////
            myApp.controller('Controller1',[Controller1]);
            function Controller1(){
            }

            /////////////
            //Angular Directive
            ////////////
            myApp.directive('myCompileLinkDirective',[MyCompileLinkDirective]);

            function MyCompileLinkDirective(){

                    return{

                        compile:function(tempElement,tempAttribute){

                            console.log("Compile Function Called");
                            console.log("COMPILED : Only element and attribute are available");
                            console.log(tempElement);
                            console.log(tempAttribute);
                            console.log("COMPILED : Scope not available");
                            console.log("Changing element in compile function...");

                        //Scope is not linked to the directive yet
                        //You can still make changes to the HTML generated by directive

                        angular
                        .element("<p>Simple Compile/Link Directive</p>")
                        .appendTo(tempElement);

                        console.log("New element after change:");
                        console.log(tempElement);

                        return {

                                pre:function(scope,instElement,instAttribute){

                                console.log("Pre Link Function Called");
                                console.log("PRE LINK : Scope is available");
                                console.log(scope);

                                },

                                post:function(scope,instElement,instAttribute) {

                                console.log("Post Link Function Called");
                                console.log("POST LINK : Scope is available");
                                console.log(scope);

                                }
                        }
                    }
            }

                </code>
              </pre>
        </div>
        <div class="col-md-4">
            <h4>Result:</h4>
            <my-compile-link-directive></my-compile-link-directive>
            <img src="../../assets/images/compile-link-phase-basic.PNG" alt="Compile & Link Phases" width="100%"/>
        </div>

    </div>
</div>

</body>
</html>